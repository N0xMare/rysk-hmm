<img align="right" width="150" height="150" top="100" src="./public/readme.jpg">

# rysk-hmm • [![tests](https://github.com/N0xMare/rysk-hmm/actions/workflows/ci.yml/badge.svg?label=tests)](https://github.com/refcell/rysk-hmm/actions/workflows/ci.yml) ![license](https://img.shields.io/github/license/refcell/rysk-hmm?label=license) ![solidity](https://img.shields.io/badge/solidity-^0.8.19-lightgrey)

## Abstract

This is a v0 implementation of the solmate ERC4626 tokenized vault, operated by an off-chain multi agent system using the [Autonolas Stack](https://docs.autonolas.network/). This Off-chain multi-agent system (Also know as an "Autonomous Service") executes arbitrary transaction logic similar to how "keeper networks" work to generate profits based on some financial strategy implemented by the off-chain service and vault contract. 

The Autonomous service is its own Multi Party Computation (MPC) network that comes to consensus using a temporary instance of tendermint in a shared state to then decide how to execute arbitrary logic amongst the agent operators of the autonomous service. The tokenized vault implementation (ERC4626 token) allows users to deposit a given underlying asset as collateral to receive shares of the tokenized vault that represents their ownership over future profits generated by the autonomous service. This is extensible to any arbitrary transaction flow such as running a liquidation fund, options trading strategies (like we did in this example), derivatives trading strategies and basically any other transaction flow you can imagine! 

In this repo I have implemented the logic necessary to allow for the ERC4626 interface with added time restrictions (locking mechanism) on deposits/withdrawals from the tokenized vault based on the idea that the "fund" must be able to remain collaterlized/solvent when handling withdrawals while also being able to deploy deposited capital as effectively as possible to generate profits for the vault and its share holders.

In future versions I will explore upgrading the locking mechanism to make for more capital effciency in use of the deposited collateral and I will greatly expand upon the financial strategies implemented with more off-chain services.

#### [Off-chain Autonomous Service Source Code](https://github.com/8ball030/liquidation_station)

### Usage

**Building & Testing**

Build the foundry project with `forge build`. Then you can run tests with `forge test`.

**Deployment & Verification**

Inside the [`utils/`](./utils/) directory are a few preconfigured scripts that can be used to deploy and verify contracts.

Scripts take inputs from the cli, using silent mode to hide any sensitive information.

_NOTE: These scripts are required to be _executable_ meaning they must be made executable by running `chmod +x ./utils/*`._


### Blueprint

```txt
lib
├─ forge-std — https://github.com/foundry-rs/forge-std
├─ solmate — https://github.com/transmissions11/solmate
scripts
├─ Deploy.s.sol — Example Contract Deployment Script
src
├─ Greeter — Example Contract
test
└─ Greeter.t — Example Contract Tests
```
